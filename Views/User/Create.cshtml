
@{
    ViewData["Title"] = "Create";
}
@model GlobalEntity.User;
<div class="card">
    <div class="card-title">
        <h2>Create/Edit User</h2>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-lg-6">
                <div class="form-group">
                    <label>Id</label>
                    <input id="txtid" value="@Model.Id" class="form-control"/>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-6">
                <div class="form-group">
                    <label>FirstName</label>
                    <input id="txtfname" value="@Model.FirstName" class="form-control" />
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-6">
                <div class="form-group">
                    <label>LastName</label>
                    <input id="txtlname" value="@Model.LastName" class="form-control" />
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-6">
                <div class="form-group">
                    <label>Email</label>
                    <input id="txtemail" value="@Model.Email" class="form-control" />
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-6">
                <div class="form-group">
                    <label>Mobile</label>
                    <input id="txtmobile" value="@Model.Mobile" class="form-control" />
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-6">
                <div class="form-group">
                    <label>CreatedDate</label>
                    <input id="txtcdate" value="@Model.CreatedDate" class="form-control" />
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-6">
                <div class="form-group">
                    <a onclick="handlesave()" class="btn btn-success">Save</a> <a onclick="backtolist()" class="btn btn-danger">Cancel</a>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
   
    function backtolist()
    {
        window.location.href = "/User";
    }

    function handlesave() {
        var id = $('#txtid').val();
        var fname = $('#txtfname').val();
        var lname = $('#txtlname').val();
        var email = $('#txtemail').val();
        var mobile = $('#txtmobile').val();
        var createddate = $('#txtcdate').val();

        var isproceed = true;

        //validation
         if (id != '' && id != null) {
            $('#txtid').css('border-color', '#ccc');
                    }
        else
        {
            $('#txtid').css('border-color', 'red');
            var isproceed = false;
        }

        if (fname != '' && fname != null) {
            $('#txtfname').css('border-color', '#ccc');
                    }
        else
        {
            $('#txtfname').css('border-color', 'red');
            var isproceed = false;
        }

        if (lname != '' && lname != null) {
            $('#txtlname').css('border-color', '#ccc');
        }
        else {
            $('#txtlname').css('border-color', 'red');
            var isproceed = false;
        }

        // if (email != '' && email != null) {
        //     $('#txtemail').css('border-color', '#ccc');
        // }
        // else {
        //     $('#txtemail').css('border-color', 'red');
        //     var isproceed = false;

        // }
        // if (mobile != '' && mobile != null) {
        //     $('#txtmobile').css('border-color', '#ccc');
        // }
        // else {
        //     $('#txtmobile').css('border-color', 'red');
        //     var isproceed = false;

        // }

        if(isproceed)
        {
            var _user = new Object();
            _user.Id = id;
            _user.FirstName = fname;
            _user.LastName = lname;
            _user.Email = email;
            _user.Mobile=mobile;
            _user.CreatedDate = createddate;
        }

        $.ajax({
            type:"POST",
            url:"/User/Save",
            data:_user,
            success:function(data){
                if (data == 'pass') {
                    alert('Saved Successfuly');
                    backtolist();
                } else {
                    alert("Failure due to:"+data)
                }
            },
            failure: function(err) {

            }
        });
    }

</script>

