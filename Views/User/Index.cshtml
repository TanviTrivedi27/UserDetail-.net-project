@model List<GlobalEntity.User>

    <div class="card">
        
        <div class="card-body">
        <a class="btn btn-success" asp-controller="User" asp-action="Create">Add New</a>
            <div class="card-title">
            <h2>
              User Listing
            </h2>
            </div>
            <table class="table table-bordered table-striped">
                <thead class="bg-dark text-white">
                    <tr>
                        <td>Id</td>
                        <td>FirstName</td>
                        <td>LastName</td>
                        <td>Email</td>
                        <td>Mobile</td>
                        <td>CreatedDate</td>
                        <td>Action</td>

                    </tr>
                </thead>
                <tbody>
                    @foreach(var item in Model)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(itemdisplay=>item.Id)
                            @Html.HiddenFor(itemdisplay=>item.Id)
                        </td>
                        <td>
                            @Html.DisplayFor(itemdisplay=>item.FirstName)
                        </td>
                        <td>
                            @Html.DisplayFor(itemdisplay=>item.LastName)
                        </td>
                        <td>
                            @Html.DisplayFor(itemdisplay=>item.Email)
                        </td>
                        <td>
                            @Html.DisplayFor(itemdisplay=>item.Mobile)
                        </td>
                        <td>
                            @Html.DisplayFor(itemdisplay=>item.CreatedDate)
                        </td>
                        <td>
                            <a onclick="FunEdit(this)" class="btn btn-primary">Edit</a> | <a onclick="FunRemove(this)" class="btn btn-danger">Remove</a>
                        </td>
                    </tr>
                }
            </tbody>
            </table>

        </div>
    </div>

    <script type="text/javascript">
    function FunEdit(element)
    {
        var id = $(element).closest('tr').find('input[type=hidden]').val();
        window.location.href = "/user/Edit?id="+id;
    }

    function FunRemove(element) {
        var id = $(element).closest('tr').find('input[type=hidden]').val();
        if (confirm("do you want to remove?")) 
        { 
            $.ajax({
                type: "POST",
                url: "/User/Remove",
                data: { id: id },
                success: function (data) {
                    if (data == 'pass') {
                        alert('Removed Successfuly');
                        window.location.reload();
                    } else {
                        alert("Failure due to:" + data)
                    }
                },
                failure: function (err) {

                }
            });
        }
        //window.location.href = "/user/Edit?id=" + id;
    }
    </script>
